define(["jquery"],function(t){var e=function(t){var e=["webkit","Moz","o","ms"],n="";for(var i in e)if(n=e[i]+"Transition",void 0!==t.style[n])return"-"+e[i].toLowerCase()+"-";return!1}(document.createElement(n)),n=function(){function n(e,n){this.settings=t.extend(!0,t.fn.PageSwitch.defaults,n||{}),this.element=e,this.init()}return n.prototype={init:function(){var t=this;t.selectors=t.settings.selectors,t.sections=t.element.find(t.selectors.sections),t.section=t.sections.find(t.selectors.section),t.direction="vertical"==t.settings.direction,t.pagesCount=t.pagesCount(),t.index=t.settings.index>=0&&t.settings.index<t.pagesCount?t.settings.index:0,t.canscroll=!0,t.direction&&!t.index||t._initLayout(),t.settings.pagination&&t._initPaging(),t._initEvent()},pagesCount:function(){return this.section.length},switchLength:function(){return this.direction?this.element.height():this.element.width()},prve:function(){var t=this;t.index>0?t.index--:t.settings.loop&&(t.index=t.pagesCount-1),t._scrollPage()},next:function(){var t=this;t.index<t.pagesCount?t.index++:t.settings.loop&&(t.index=0),t._scrollPage()},_initLayout:function(){var t=this;if(!t.direction){var e=100*t.pagesCount+"%",n=(100/t.pagesCount).toFixed(2)+"%";t.sections.width(e),t.section.width(n).css("float","left")}t.index&&t._scrollPage()},_initPaging:function(){var t=this,e=t.selectors.page.substring(1);t.activeClass=t.selectors.active.substring(1);for(var n="<div class="+e+">",i=0;i<t.pagesCount;i++)n+="<div></div>";n+="</div>",t.element.append(n);var s=t.element.find(t.selectors.page);t.pageItem=s.find("div"),t.pageItem.eq(t.index).addClass(t.activeClass),t.direction?s.addClass("vertical"):s.addClass("horizontal")},_initEvent:function(){var n=this;n.element.on("click",n.selectors.page+" div",function(){n.index=t(this).index(),n._scrollPage()}),n.element.on("mousewheel DOMMouseScroll",function(t){t.preventDefault();var e=t.originalEvent.wheelDelta||-t.originalEvent.detail;n.canscroll&&(e>0&&(n.index&&!n.settings.loop||n.settings.loop)?n.prve():e<0&&(n.index<n.pagesCount-1&&!n.settings.loop||n.settings.loop)&&n.next())}),n.settings.keyboard&&t(window).on("keydown",function(t){var e=t.keyCode;37==e||38==e?n.prve():39!=e&&40!=e||n.next()}),t(window).resize(function(){var t=n.switchLength(),e=n.settings.direction?n.section.eq(n.index).offset().top:n.section.eq(n.index).offset().left;Math.abs(e)>t/2&&n.index<n.PagesCount-1&&n.index++,n.index&&n._scrollPage()}),e&&n.sections.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(){n.canscroll=!0,n.settings.callback&&"function"==t.type(n.settings.callback)&&n.settings.callback()})},_scrollPage:function(t){var n=this,i=n.section.eq(n.index).position();if(i){if(n.canscroll=!1,e){var s=n.direction?"translateY(-"+i.top+"px)":"translateX(-"+i.left+"px)";n.sections.css(e+"transition","all "+n.settings.duration+"ms "+n.settings.easing),n.sections.css(e+"transform",s)}else{var o=n.direction?{top:-i.top}:{left:-i.left};n.sections.animate(o,n.settings.duration,function(){n.canscroll=!0,n.settings.callback&&n.settings.callback()})}n.settings.pagination&&!t&&n.pageItem.eq(n.index).addClass(n.activeClass).siblings("div").removeClass(n.activeClass)}}},n}();t.fn.PageSwitch=function(e){return this.each(function(){var i=t(this),s=i.data("PageSwitch");if(s||i.data("PageSwitch",s=new n(i,e)),"string"===t.type(e))return s[e]()})},t.fn.PageSwitch.defaults={selectors:{sections:".sections",section:".section",page:".pages",active:".active"},index:0,easing:"ease",duration:500,loop:!1,pagination:!0,keyboard:!0,direction:"vertical",callback:""}});